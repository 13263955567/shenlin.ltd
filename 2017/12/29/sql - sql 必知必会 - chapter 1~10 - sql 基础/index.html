<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="sql," />










<meta name="description" content="sql 基础知识。">
<meta name="keywords" content="sql">
<meta property="og:type" content="article">
<meta property="og:title" content="sql - sql 必知必会 - chapter 1~10 - sql 基础">
<meta property="og:url" content="http://www.shenlin.ltd/2017/12/29/sql - sql 必知必会 - chapter 1~10 - sql 基础/index.html">
<meta property="og:site_name" content="shenlin&#39;s blog">
<meta property="og:description" content="sql 基础知识。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-10-26T07:45:59.703Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sql - sql 必知必会 - chapter 1~10 - sql 基础">
<meta name="twitter:description" content="sql 基础知识。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.shenlin.ltd/2017/12/29/sql - sql 必知必会 - chapter 1~10 - sql 基础/"/>





  <title>sql - sql 必知必会 - chapter 1~10 - sql 基础 | shenlin's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">shenlin's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">what the fuck?!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/12/29/sql - sql 必知必会 - chapter 1~10 - sql 基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">sql - sql 必知必会 - chapter 1~10 - sql 基础</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-29T06:18:35+08:00">
                2017-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sql/" itemprop="url" rel="index">
                    <span itemprop="name">sql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>sql 基础知识。</p>
<a id="more"></a>
<h2 id="名词概念"><a href="#名词概念" class="headerlink" title="名词概念"></a>名词概念</h2><p><strong>sql</strong></p>
<p>structure query language 结构化查询语言</p>
<p><strong>ANSI sql</strong></p>
<p>标准 SQL 由 ANSI 管理，从而称为 ANSI SQL 。所有主要的 DBMS ，即使有自己的扩展，也都支持 ANSI SQL 。各个实现有自己的名称，如 PL/SQL 、 Transact-SQL  等。</p>
<p>ANSI 美国国家标准学会（ American National Standards Institute）</p>
<p><strong>schema 模式</strong></p>
<p>关于数据库和表的布局及特性的信息。</p>
<p>表具有一些特性，这些特性定义了数据在表中如何存储，包含存储什么样的数据，数据如何分解，各部分信息如何命名等信息。描述表的这组信息就是所谓的 模式（ schema ），模式可以用来描述数据库中特定的表，也可以用来描述整个数据库（和其中表的关系）。</p>
<p><strong>数据类型兼容性</strong></p>
<p>大多数的基本数据类型都得到了一致的支持，但许多高级数据类型并没有并一致支持，且有相同的数据类型在不同的 DBMS 里有不同的名称。</p>
<p><strong>行和记录</strong></p>
<p>行也可称为记录，但从技术上来说，行才是正确的术语。</p>
<p><strong>列和字段</strong></p>
<p>字段（ field ）基本上与 列（ column ）的意思相同，经常互换使用，不过数据库列一般称为列，而字段一般用来称呼经过计算的列，即计算字段</p>
<p><strong>主键</strong></p>
<p>主键用来唯一的标识表中的每一行，可以是一列或几列的组合</p>
<p>主键列的值不能修改更新，如果某行从表中删除，则它的主键值不能重用，即不能赋给后面的新行  ??? 确认下</p>
<p><strong>子句</strong></p>
<p>sql 语句由子句 clause 组成，有可选的有必需的，子句通常由关键字和数据组成。</p>
<h2 id="结束分号"><a href="#结束分号" class="headerlink" title="结束分号"></a>结束分号</h2><p>多个 sql 语句用分号分隔，单条 sql 语句有的 DBMS 也要求分号结束，建议每个 sql 语句后都加分号。</p>
<h2 id="大小写"><a href="#大小写" class="headerlink" title="大小写"></a>大小写</h2><p>sql 语句的关键字不区分大小写，但 sql 语句中的表名、数据库名、列名等是否区分大小写要看具体 DBMS 的设置。</p>
<p>建议 sql 语句里关键字大写，表名、列名小写，清晰方便。</p>
<p>mysql</p>
<ul>
<li>库名、表名区分大小写</li>
<li>列名不区分大小写</li>
<li>函数名不区分大小写</li>
</ul>
<h2 id="空白字符"><a href="#空白字符" class="headerlink" title="空白字符"></a>空白字符</h2><p>sql 语句中的空白字符被忽略</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">prod_name</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">Products;</span><br></pre></td></tr></table></figure>
<h2 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h2><p>distinct 不是仅对后面的第一个列起作用，而是对列在后面的每一个列都起作用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="keyword">id</span>,uname <span class="keyword">from</span> wanjia;</span><br></pre></td></tr></table></figure>
<ul>
<li>表示 id 和 uname 的组合不重复</li>
</ul>
<h2 id="限制输出结果"><a href="#限制输出结果" class="headerlink" title="限制输出结果"></a>限制输出结果</h2><p>只输出匹配结果的前几行，各 DBMS 的实现不一样</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--sql server</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">5</span> * <span class="keyword">from</span> wanjia;</span><br><span class="line"></span><br><span class="line"><span class="comment">--db2</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">fetch</span> <span class="keyword">first</span> <span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">only</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--oracle</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">rownum</span> &lt;= <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL、MariaDB、PostgreSQL、SQLite</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">limit</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">limit</span> <span class="number">5</span> <span class="keyword">offset</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">limit</span> <span class="number">5</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单行注释</span></span><br><span class="line"></span><br><span class="line"># 单行注释 </span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">   多行 </span></span><br><span class="line"><span class="comment">   注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>上面 3 种注释 mysql 都支持</li>
</ul>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><p>使用 order by 子句排序，且 order by 子句出现的话就应该是 selelct 的最后一条子句，否则出错</p>
<p>没有明确使用排序子句 order by 时，检索出的数据的顺序并不是随机的，而是以数据在底层表中的顺序显示，可能是数据最初添加到表中的顺序，但是数据被更新删除后，顺序则受到 DBMS 回收重用空间策略的影响。</p>
<p>默认升序排序 asc ascending ，降序 desc descending ，desc 只对紧随其后的第一个列其作用，如果多个列要降序则必须每个列都加上 desc<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia order by addr desc,credits;</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">| id   | uname   | addr      | credits |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">|    1 | ssl     | handan    |       3 |</span><br><span class="line">|    5 | shenlin | handan    |      12 |</span><br><span class="line">| NULL | mxx     | changshan |      12 |</span><br><span class="line">|    2 | ssy     | beijing   |       6 |</span><br><span class="line">|    3 | gxx     | baoding   |       9 |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">order</span> <span class="keyword">by</span> addr <span class="keyword">desc</span>,credits <span class="keyword">desc</span>;</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">| id   | uname   | addr      | credits |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">|    5 | shenlin | handan    |      12 |    <span class="comment">-- 这里 addr 相同，则按 credits 排序</span></span><br><span class="line">|    1 | ssl     | handan    |       3 |</span><br><span class="line">| NULL | mxx     | changshan |      12 |</span><br><span class="line">|    2 | ssy     | beijing   |       6 |    <span class="comment">-- 这里按 addr 排序</span></span><br><span class="line">|    3 | gxx     | baoding   |       9 |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br></pre></td></tr></table></figure></p>
<p>可以按列的位置排序，下面的排序等同于 order by id desc<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia order by 1 desc;</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">| id   | uname   | addr      | credits |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">|    5 | shenlin | handan    |      12 |</span><br><span class="line">|    3 | gxx     | baoding   |       9 |</span><br><span class="line">|    2 | ssy     | beijing   |       6 |</span><br><span class="line">|    1 | ssl     | handan    |       3 |</span><br><span class="line">| NULL | mxx     | changshan |      12 |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>缺点<ul>
<li>不明确排序列名可能使用了错误的列名排序</li>
<li>对 select 清单进行更改时忘记修改排序子句则可能使用了错误的列名排序</li>
<li>不能使用不在 select 清单里的列名排序</li>
</ul>
</li>
<li>优点<ul>
<li>不用再写一遍列名</li>
</ul>
</li>
</ul>
<p>大小写的排序问题，如 A、a、z、Z 的排序问题是数据库的设置问题，不是 order by 子句的问题，大部分的 DBMS 的字典排序都把 a 和 A 视为相同 ???</p>
<h2 id="where-子句操作符"><a href="#where-子句操作符" class="headerlink" title="where 子句操作符"></a>where 子句操作符</h2><p>并非所有的 DBMS 都支持下列全部的操作符，但同时许多 DBMS 又扩展了标准的操作符集，具体支持情况需查阅 DBMS 帮助：</p>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html</a></p>
<p><code>=</code> 等于</p>
<p><code>&lt;&gt;</code> 不等于<br><code>!=</code> 不等于</p>
<p><code>&lt;</code> 小于<br><code>&lt;=</code> 小于等于</p>
<p><code>&gt;</code> 大于<br><code>&gt;=</code> 大于等于</p>
<p><code>!&lt;</code> 不小于 （mysql 不支持）<br><code>!&gt;</code> 不大于 （mysql 不支持）</p>
<p><code>BETWEEN a AND b</code> 在指定的两个值之间，包含了起始点和终止点</p>
<p><code>IS NULL</code> 为 NULL 值</p>
<p><code>IS NOT NULL</code></p>
<p>值为 NULL 的列在判断时必须用 <code>is null</code> <code>is not null</code> 过滤，使用 <code>id=2 or id&lt;&gt;2</code> 都不包含值为 NULL 的列 :<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia;</span><br><span class="line">+<span class="comment">------+-------+-----------+---------+</span></span><br><span class="line">| id   | uname | addr      | credits |</span><br><span class="line">+<span class="comment">------+-------+-----------+---------+</span></span><br><span class="line">|    1 | ssl   | handan    |       3 |</span><br><span class="line">|    2 | ssy   | beijing   |       6 |</span><br><span class="line">|    3 | gxx   | baoding   |       9 |</span><br><span class="line">| NULL | mxx   | changshan |      12 |</span><br><span class="line">+<span class="comment">------+-------+-----------+---------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span> <span class="keyword">or</span> <span class="keyword">id</span> &lt;&gt; <span class="number">2</span>;</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">| id   | uname | addr    | credits |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">|    3 | gxx   | baoding |       9 |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<h2 id="组合-where-子句"><a href="#组合-where-子句" class="headerlink" title="组合 where 子句"></a>组合 where 子句</h2><p>and , or , in, not</p>
<p>IN 操作符通常比一组 OR 操作符执行的更快</p>
<p>NOT 是用来否定其后所跟任何条件的关键字，NOT 在复杂的 sql 语句中使用很方便，大多数 DBMS 支持使用 NOT 否定任何条件</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia where NOT id is null;</span><br><span class="line">+<span class="comment">------+---------+---------+---------+</span></span><br><span class="line">| id   | uname   | addr    | credits |</span><br><span class="line">+<span class="comment">------+---------+---------+---------+</span></span><br><span class="line">|    1 | ssl     | handan  |       3 |</span><br><span class="line">|    2 | ssy     | beijing |       6 |</span><br><span class="line">|    3 | gxx     | baoding |       9 |</span><br><span class="line">|    5 | shenlin | handan  |      12 |</span><br><span class="line">+<span class="comment">------+---------+---------+---------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">NOT</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">| id   | uname   | addr   | credits |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">|    5 | shenlin | handan |      12 |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">NOT</span> <span class="keyword">id</span> = <span class="number">3</span>;</span><br><span class="line">+<span class="comment">------+---------+---------+---------+</span></span><br><span class="line">| id   | uname   | addr    | credits |</span><br><span class="line">+<span class="comment">------+---------+---------+---------+</span></span><br><span class="line">|    1 | ssl     | handan  |       3 |</span><br><span class="line">|    2 | ssy     | beijing |       6 |</span><br><span class="line">|    5 | shenlin | handan  |      12 |</span><br><span class="line">+<span class="comment">------+---------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p><code>%</code> 匹配任何字符任何次数</p>
<p><code>_</code> 下划线匹配单个字符</p>
<p><code>[abc]</code> 匹配单个字符 a 或 b 或 c，mysql 不支持</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia where uname like 'ss_';</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">| id   | uname | addr    | credits |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>通配符尽量不要放到搜索模式的开始处，否则速度是最慢的</p>
<h2 id="拼接字段"><a href="#拼接字段" class="headerlink" title="拼接字段"></a>拼接字段</h2><p>Access 、 SQLServer 使用 <code>+</code> 拼接<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> + <span class="keyword">name</span> <span class="keyword">from</span> wanjia;</span><br></pre></td></tr></table></figure></p>
<p>PostgreSQL 、 SQLite 使用 <code>||</code> 拼接<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> || <span class="keyword">name</span> <span class="keyword">from</span> wanjia;</span><br></pre></td></tr></table></figure></p>
<p>MySQL 需要使用函数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(id,'--',uname) from wanjia;</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| concat(id,'<span class="comment">--',uname) |</span></span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| 1<span class="comment">--ssl                |</span></span><br><span class="line">| 2<span class="comment">--ssy                |</span></span><br><span class="line">| 3<span class="comment">--gxx                |</span></span><br><span class="line">| NULL                  |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>别名有时也被称为导出列 derived column</p>
<p>别名使用关键字 AS， 许多 DBMS 中关键字 AS 是可选的，但建议使用。</p>
<p>在指定别名时，不应该使用表中实际的列名。虽然这样做也算合法，但许多 SQL 实现不支持，可能会产生模糊的错误消息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(id,'--',uname) iname from wanjia;</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">| iname  |</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">| 1<span class="comment">--ssl |</span></span><br><span class="line">| 2<span class="comment">--ssy |</span></span><br><span class="line">| 3<span class="comment">--gxx |</span></span><br><span class="line">| NULL   |</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">concat</span>(<span class="keyword">id</span>,<span class="string">'--'</span>,uname) <span class="keyword">as</span> iname <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">| iname  |</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">| 1<span class="comment">--ssl |</span></span><br><span class="line">| 2<span class="comment">--ssy |</span></span><br><span class="line">| 3<span class="comment">--gxx |</span></span><br><span class="line">| NULL   |</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>与几乎所有 DBMS 都等同地支持 SQL 语句（如SELECT）不同，每一个 DBMS 都有特定的函数，所以 SQL 函数是不可移植的。如 PostgreSQL 和 SQLite 使用 SUBSTR() ； MySQL 和 SQL Server 使用 SUBSTRING() 等</p>
<p>大多数 DBMS 支持以下类型的函数：</p>
<ul>
<li>文本字符串函数 : <ul>
<li>left,rihgt</li>
<li>rtrim,ltrim</li>
<li>lower,upper</li>
<li>length</li>
<li>soundex</li>
<li>soundex 是把文本字符串的发音用字母数字来表示，可以对字符串进行发音比较，模糊匹配</li>
</ul>
</li>
<li>日期时间函数，是可移植性最差的一类函数，各 DBMS 实现差异很大，如提取年份的函数就有：<ul>
<li>SQL Server : DATEPART(yy, order_date)</li>
<li>PostgreSQL : DATE_PART(‘year’, order_date)</li>
<li>Oracle : to_number(to_char(order_date, ‘YYYY’))</li>
<li>MySQL : YEAR(order_date)</li>
<li>SQLite : strftime(‘%Y’, order_date)</li>
</ul>
</li>
<li>数值处理函数，使用最少，但却是各 DBMS 最统一、最一致的一类函数<ul>
<li>ABS() 返回一个数的绝对值</li>
<li>SIN() 返回一个角度的正弦</li>
<li>COS() 返回一个角度的余弦</li>
<li>EXP() 返回一个数的指数值</li>
<li>SQRT() 返回一个数的平方根</li>
<li>TAN() 返回一个角度的正切</li>
<li>PI() 返回圆周率</li>
</ul>
</li>
<li>系统函数</li>
</ul>
<p>soundex 模糊匹配拼错的单词<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia where uname = 'shenln';</span><br><span class="line">Empty <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">soundex</span>(uname) = <span class="keyword">soundex</span>(<span class="string">'shenln'</span>);</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">| id   | uname   | addr   | credits |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">|    5 | shenlin | handan |      12 |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<h2 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h2><p>聚集函数 Aggregate Function，可以汇总数据，包括：</p>
<ul>
<li>MAX() 返回某列的最大值，忽略值为 NULL 的列，也可用于文本列返回最大值</li>
<li>MIN() 返回某列的最小值，忽略值为 NULL 的列，也可用于文本列返回最小值</li>
<li>SUM() 返回某列值之和，忽略值为 NULL 的列</li>
<li>AVG() 返回某列的平均值，忽略值为 NULL 的列</li>
<li>COUNT() 返回行数</li>
</ul>
<p>count(*)返回表中记录的总行数，count(某一列) 则返回此列值不为 NULL 的总行数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(id) from wanjia;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| count(id) |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">|         4 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| count(*) |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">|        5 |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>min,max 用于文本列<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select uname from wanjia order by uname;</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| uname   |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| gxx     |</span><br><span class="line">| mxx     |</span><br><span class="line">| shenlin |</span><br><span class="line">| ssl     |</span><br><span class="line">| ssy     |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">min</span>(uname) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| min(uname) |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| gxx        |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">max</span>(uname) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| max(uname) |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| ssy        |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>聚集函数可以和 distinct 或 all 参数搭配，默认是 all 参数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select credits from wanjia;</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">| credits |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">|       3 |</span><br><span class="line">|       6 |</span><br><span class="line">|       9 |</span><br><span class="line">|      12 |</span><br><span class="line">|      12 |</span><br><span class="line">+<span class="comment">---------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 和 avg 搭配</span></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">avg</span>(<span class="keyword">distinct</span> credits) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| avg(distinct credits) |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|                7.5000 |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">avg</span>(all credits) <span class="keyword">from</span> wanjia;         <span class="comment">-- 使用 all 和不使用 all 参数效果是一样的</span></span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">| avg(all credits) |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">|           8.4000 |</span><br><span class="line">+<span class="comment">------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">avg</span>(credits) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| avg(credits) |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">|       8.4000 |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 和 count 搭配</span></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">count</span>(credits) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| count(credits) |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">|              5 |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> credits) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| count(distinct credits) |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">|                       4 |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> *) <span class="keyword">from</span> wanjia;                <span class="comment">-- distinct 不能和 count(*) 搭配</span></span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 和 sum, min, max 搭配</span></span><br><span class="line"></span><br><span class="line">mysql&gt; select sum(distinct credits) from wanjia;</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| sum(distinct credits) |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|                    30 |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">distinct</span> credits) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| max(distinct credits) |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|                    12 |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">min</span>(<span class="keyword">distinct</span> credits) <span class="keyword">from</span> wanjia;</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| min(distinct credits) |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|                     3 |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<h2 id="分组数据"><a href="#分组数据" class="headerlink" title="分组数据"></a>分组数据</h2><p>使用 GROUP BY 和 HAVING 可以把数据分为多个逻辑组，然后对每个逻辑组进行聚集计算。</p>
<p>GROUP BY 注意事项：</p>
<ul>
<li>GROUP BY 子句必须在 where 子句之后 order by 子句之前：<code>select addr,count(id) from wanjia where id &lt; 9 GROUP BY addr order by addr</code></li>
<li>除了聚集计算语句外，select 语句中的每一列都必须在 GROUP BY 子句中</li>
<li>如果在SELECT中使用表达式，则必须在GROUP BY子句中指定相同的表达式，不能使用别名。???</li>
</ul>
<p>测试 mysql 可以在 group by 使用别名<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(addr,'xxx') as newaddr,sum(credits) as Cnt from wanjia group by newaddr having Cnt &gt; 9;</span><br><span class="line">+<span class="comment">--------------+------+</span></span><br><span class="line">| newaddr      | Cnt  |</span><br><span class="line">+<span class="comment">--------------+------+</span></span><br><span class="line">| changshanxxx |   12 |</span><br><span class="line">| handanxxx    |   15 |</span><br><span class="line">+<span class="comment">--------------+------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select addr,sum(credits) from wanjia GROUP BY addr;</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">| addr      | sum(credits) |</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">| baoding   |            9 |</span><br><span class="line">| beijing   |            6 |</span><br><span class="line">| changshan |           12 |</span><br><span class="line">| handan    |           15 |</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> addr,<span class="keyword">sum</span>(credits) <span class="keyword">from</span> wanjia <span class="keyword">group</span> <span class="keyword">by</span> <span class="number">1</span>; <span class="comment">-- 通过相对位置指定列，搜索列从 1 开始，不推荐使用</span></span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">| addr      | sum(credits) |</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">| baoding   |            9 |</span><br><span class="line">| beijing   |            6 |</span><br><span class="line">| changshan |           12 |</span><br><span class="line">| handan    |           15 |</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>where 子句在分组前过滤数据，Having 子句则在分组后过滤数据，即用于过滤分组数据</p>
<p>having 子句十分类似 where 子句，没有和 group by 搭配时大多数 DBMS 会同等对待两者，即可以这样执行：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia having id = 1;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+</span></span><br><span class="line">| id   | uname | addr   | credits |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>虽然可执行，但 where 子句才是标准的行级过滤，having 还是应和 group by 搭配</li>
</ul>
<p>having 和 group by 搭配过滤分组数据<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select addr,sum(credits) from wanjia group by addr having sum(credits) &gt; 9;</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">| addr      | sum(credits) |</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">| changshan |           12 |</span><br><span class="line">| handan    |           15 |</span><br><span class="line">+<span class="comment">-----------+--------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>having 可以使用别名<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select addr,sum(credits) as Cnt from wanjia group by addr having Cnt &gt; 9;</span><br><span class="line">+<span class="comment">-----------+------+</span></span><br><span class="line">| addr      | Cnt  |</span><br><span class="line">+<span class="comment">-----------+------+</span></span><br><span class="line">| changshan |   12 |</span><br><span class="line">| handan    |   15 |</span><br><span class="line">+<span class="comment">-----------+------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<h2 id="子句顺序"><a href="#子句顺序" class="headerlink" title="子句顺序"></a>子句顺序</h2><p><code>select ... from ... where ... group by ... having ... order by ...</code></p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询是嵌套在其他查询中的查询，子查询总是从内向外处理</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia where id in (select uid from wanwu where id = 1);</span><br><span class="line">+<span class="comment">------+-------+--------+---------+</span></span><br><span class="line">| id   | uname | addr   | credits |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="keyword">select</span> uid,wname <span class="keyword">from</span> wanwu <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>);</span><br><span class="line">ERROR 1241 (21000): Operand should contain 1 column(s)</span><br><span class="line"></span><br><span class="line">mysql&gt; select *,(select count(*) from wanwu where wanwu.uid = wanjia.id) as wnum from wanjia;</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+</span></span><br><span class="line">| id   | uname   | addr      | credits | wnum |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+</span></span><br><span class="line">|    1 | ssl     | handan    |       3 |    1 |</span><br><span class="line">|    2 | ssy     | beijing   |       6 |    0 |</span><br><span class="line">|    3 | gxx     | baoding   |       9 |    0 |</span><br><span class="line">| NULL | mxx     | changshan |      12 |    0 |</span><br><span class="line">|    5 | shenlin | handan    |      12 |    0 |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>子查询只能返回一个列，返回多个列时出错</li>
</ul>
<h2 id="联结查询"><a href="#联结查询" class="headerlink" title="联结查询"></a>联结查询</h2><p><strong>可伸缩（ scale ）</strong></p>
<p>能够适应不断增加的工作量而不失败。设计良好的数据库或应用程序称为可伸缩性好（ scale well ）</p>
<p><strong>关系数据库</strong></p>
<p>关系数据库由关系表组成，关系表的设计就是要把信息分解成多个表，一类数据一个表。各表通过某些共同的值互相关联。</p>
<p><strong>完全限定名</strong></p>
<p>一个查询中涉及多个表有相同的列名时，使用<code>表名.列名</code>的格式来</p>
<p><strong>笛卡尔积</strong></p>
<p>cartesian product</p>
<p><strong>联结</strong></p>
<p>将数据分解为多个表能更有效地存储，更方便地处理，并且可伸缩性更好</p>
<p>如果数据存储在多个表中，怎样用一条SELECT语句就检索出数据呢？</p>
<p>方法就是使用联结</p>
<h3 id="内联结"><a href="#内联结" class="headerlink" title="内联结"></a>内联结</h3><p>也称为等值联结 equijoin，基于两个表之间的相等测试</p>
<p>内联结有两种语法，简单语法和标准语法，ANSI SQL规范首先的是标准语法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 简单语法</span></span><br><span class="line">mysql&gt; select * from wanjia,wanwu where wanjia.id = wanwu.uid;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname | addr   | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 标准语法 </span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">inner</span> <span class="keyword">join</span> wanwu <span class="keyword">on</span> wanjia.id = wanwu.uid;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname | addr   | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<p><strong>表别名</strong></p>
<p>联结查询时可以给表取别名，即可以缩短 sql，还可以对一个表使用多次</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia as j,wanjia as i,wanwu as w where j.id = w.uid and w.uid = i.id;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname | addr   | credits | id   | uname | addr   | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |    1 | ssl   | handan |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>列别名会返回到客户端，表别名不会</li>
</ul>
<p><strong>笛卡尔积</strong></p>
<p>联结时 where 子句很重要，否则没有条件的联结表查询返回的是笛卡尔积（也称为叉联结 cross join），<br>即把第一个表的每一行和第二个表的每一行匹配，行数是第一个表的行数乘以第二个表的行数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia,wanwu;</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname   | addr      | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl     | handan    |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">|    2 | ssy     | beijing   |       6 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">|    3 | gxx     | baoding   |       9 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">| NULL | mxx     | changshan |      12 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">|    5 | shenlin | handan    |      12 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+------+-------+--------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure></p>
<p><strong>自联结</strong></p>
<p>一个联结查询中关联的两个表是同一个表的情况称为自联结，通常自联结比子查询要快<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 自联结</span></span><br><span class="line">mysql&gt; select j.* from wanjia w, wanjia j where w.addr = j.addr and w.id = 1 and w.id &lt;&gt; j.id;</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">| id   | uname   | addr   | credits |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">|    5 | shenlin | handan |      12 |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> addr = (<span class="keyword">select</span> addr <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>) <span class="keyword">and</span> <span class="keyword">id</span> &lt;&gt; <span class="number">1</span>;</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">| id   | uname   | addr   | credits |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">|    5 | shenlin | handan |      12 |</span><br><span class="line">+<span class="comment">------+---------+--------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure></p>
<p><strong>自然联结</strong></p>
<p>联结查询中，相联结的列在两个表中会重复出现，则 select 列时，对一个表用通配符 <code>*</code>，对列一个表则指定列名避免重复列出现就是自然联结<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select wanjia.*,wanwu.wname from wanjia,wanwu where wanjia.id=wanwu.uid;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+-------+</span></span><br><span class="line">| id   | uname | addr   | credits | wname |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+-------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 | sword |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+-------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure></p>
<p><strong>搭配聚合函数</strong></p>
<p>???测试失败<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select wanjia.*,count(wanwu.id) from wanjia inner join wanwu on wanjia.id = wanwu.uid group by wanwu.uid;</span><br><span class="line"></span><br><span class="line">ERROR 1055 (42000): Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'wanzhu.wanjia.uname' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br></pre></td></tr></table></figure></p>
<h3 id="外联结"><a href="#外联结" class="headerlink" title="外联结"></a>外联结</h3><p>联结查询中涉及到多表关联查询，例如 A 表中 3 条数据，相关联的 B 表中缺少 1 条对应数据，只有 2 条对应数据，<br>查询结果只包含两个表相关联数据的称为内联结，查询结果包含了一个表中全部数据而不论另一个表是否有对应数据的称为外联结，<br>包含左边表数据的称为左外联结 left outer join，<br>包含右边表数据的称为右外联结  right outer join，<br>包含左、右两个表数据的称为全外联结 full outer join，mysql 不支持全外联结</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 内联结</span></span><br><span class="line">mysql&gt; select * from wanjia inner join wanwu on  wanjia.id = wanwu.uid;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname | addr   | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左外联结</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> wanwu <span class="keyword">on</span>  wanjia.id = wanwu.uid;</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname   | addr      | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl     | handan    |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">|    2 | ssy     | beijing   |       6 | NULL | NULL | NULL  | NULL               |</span><br><span class="line">|    3 | gxx     | baoding   |       9 | NULL | NULL | NULL  | NULL               |</span><br><span class="line">| NULL | mxx     | changshan |      12 | NULL | NULL | NULL  | NULL               |</span><br><span class="line">|    5 | shenlin | handan    |      12 | NULL | NULL | NULL  | NULL               |</span><br><span class="line">+<span class="comment">------+---------+-----------+---------+------+------+-------+--------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右外联结</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> wanwu <span class="keyword">on</span>  wanjia.id = wanwu.uid;</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">| id   | uname | addr   | credits | id   | uid  | wname | wdesc              |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">|    1 | ssl   | handan |       3 |    1 |    1 | sword | sharp light weapon |</span><br><span class="line">+<span class="comment">------+-------+--------+---------+------+------+-------+--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 全外联结</span></span><br><span class="line">mysql 不支持</span><br></pre></td></tr></table></figure>
<h2 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h2><p>sql 允许多个 select 查询的结果作为一个返回，可以使用 union 操作符来完成</p>
<p>union 连接的两个 select 查询列名、表达式、别名或聚集函数必须相同，但顺序可以不同；列的数据类型可以不完全相同，但要兼容</p>
<p>组合查询可以多条 select 语句查询一个表，也可以查询多个表，查询同一个表时总是可以使用 where 子句替换，</p>
<p>但到底是 union 查询效率更高还是 where 子句，需要针对具体 DBMS 测试</p>
<p>union 默认是 <code>union distinct</code> 不包含重复的行，<code>union all</code> 则包含了重复行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia where id &lt; 4 union select * from wanjia where id &lt; 5;</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">| id   | uname | addr    | credits |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">|    3 | gxx   | baoding |       9 |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> &lt; <span class="number">4</span> <span class="keyword">union</span> <span class="keyword">distinct</span> <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> &lt; <span class="number">5</span>;</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">| id   | uname | addr    | credits |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">|    3 | gxx   | baoding |       9 |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> &lt; <span class="number">4</span> <span class="keyword">union</span> all <span class="keyword">select</span> * <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> &lt; <span class="number">5</span>;</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">| id   | uname | addr    | credits |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">|    3 | gxx   | baoding |       9 |</span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">|    3 | gxx   | baoding |       9 |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>使用 union 连接的两个 select 语句只允许在末尾有一个 order by 子句，会排序所有 select 语句的结果<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from wanjia where id &lt; 4 order by id union select * from wanjia where id &lt; 5;</span><br><span class="line">ERROR 1221 (HY000): Incorrect usage of UNION and ORDER BY</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from wanjia where id &lt; 4 order by id union select * from wanjia where id &lt; 5 order by id;</span><br><span class="line">ERROR 1221 (HY000): Incorrect usage of UNION and ORDER BY</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from wanjia where id &lt; 4  union select * from wanjia where id &lt; 5 order by id;</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">| id   | uname | addr    | credits |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">|    1 | ssl   | handan  |       3 |</span><br><span class="line">|    2 | ssy   | beijing |       6 |</span><br><span class="line">|    3 | gxx   | baoding |       9 |</span><br><span class="line">+<span class="comment">------+-------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>某些 DBMS 还支持另外两种 UNION：EXCEPT（有时称为MINUS）可用来检索只在第一个表中存在而在第二个表中不存在的行；而 INTERSECT 可用来检索两个表中都存在的行。实际上，这些UNION很少使用，因为相同的结果可利用联结得到。</p>
<h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><p>Insert 之后的 Into 关键字，在某些 DBMS 中是可选的，但建议保留以保证 sql 语句的可移植性。</p>
<p>基本的插入数据方法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> wanjia <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'ssl'</span>,<span class="string">'handan'</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure></p>
<ul>
<li>高度依赖于表中列的定义次序，在表结构变动后不能保证次序完全相同，因此不安全</li>
</ul>
<p>更安全的数据插入方法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> wanjia(<span class="keyword">id</span>,uname,addr,credits) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'ssl'</span>,<span class="string">'handan'</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure></p>
<p>插入部分列<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> wanjia(<span class="keyword">id</span>,uname,addr) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'ssl'</span>,<span class="string">'handan'</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>insert select</strong></p>
<p>把检索出的数据插入一个 <strong>已存在</strong> 的表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into wanjia2 select * from wanjia;</span><br><span class="line">Query OK, 5 rows affected (0.07 sec)</span><br><span class="line">Records: 5  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into wanjia222 select * from wanjia;</span><br><span class="line">ERROR 1146 (42S02): Table 'wanzhu.wanjia222' doesn't exist</span><br></pre></td></tr></table></figure>
<p><strong>select into</strong></p>
<p>把表的数据复制到另一个 <strong>新</strong> 表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table wanjia3 as select * from wanjia;</span><br><span class="line">Query OK, 5 rows affected (0.12 sec)</span><br><span class="line">Records: 5  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>有的 DBMS 支持 update from 子句</p>
<p>mysql 是否支持 ???</p>
<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>某些 DBMS 中 delete 后面的 from 是可选的，但建议加上方便移植性</p>
<p>delete 删除整行而不是整列所以不需要指定列名或通配符<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> wanjia <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p>
<p>从表中删除所有行，truncate 速度更快，因为不记录数据的变动<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> wanjia2;</span><br></pre></td></tr></table></figure></p>
<p>执行 update 或 delete 前应先使用 select 测试 where 子句选择的数据是否准确</p>
<h2 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h2><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_name (</span><br><span class="line">    column1_name <span class="built_in">char</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">    column2_name <span class="built_in">char</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">add</span> new_column1 <span class="built_in">smallint</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">change</span> column1_name column_new_name <span class="built_in">smallint</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">drop</span> <span class="keyword">column</span> column1_name;</span><br></pre></td></tr></table></figure>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tb_name;</span><br></pre></td></tr></table></figure>
<h3 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> tb_name tb_new_name;</span><br></pre></td></tr></table></figure>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p><strong>只读视图</strong></p>
<p>视图可以创建和读取，但内容不能更改，SQLite 只支持只读视图。</p>
<p>所有 DBMS 都支持的视图创建语法<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> vw_wanjia <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">id</span> <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pd_s</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> wanjia</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">is</span> <span class="literal">null</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">execute</span> pd_s(<span class="string">'id'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h2><h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tb_name</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> primary <span class="keyword">key</span> <span class="keyword">on</span> <span class="keyword">id</span>;</span><br><span class="line">get date();</span><br><span class="line">current_date();</span><br></pre></td></tr></table></figure>
<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tb_name</span><br></pre></td></tr></table></figure>
<h3 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="检查约束"><a href="#检查约束" class="headerlink" title="检查约束"></a>检查约束</h3><h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/sql/" rel="tag"># sql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/28/RegExp - PCRE 和正则表达式的误点/" rel="next" title="RegExp - PCRE和正则表达式的误点">
                <i class="fa fa-chevron-left"></i> RegExp - PCRE和正则表达式的误点
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/29/mysql-temp/" rel="prev" title="">
                 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">shenlin</p>
              <p class="site-description motion-element" itemprop="description">A Programmer's Blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">165</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">82</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#名词概念"><span class="nav-number">1.</span> <span class="nav-text"><a href="#&#x540D;&#x8BCD;&#x6982;&#x5FF5;" class="headerlink" title="&#x540D;&#x8BCD;&#x6982;&#x5FF5;"></a>&#x540D;&#x8BCD;&#x6982;&#x5FF5;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结束分号"><span class="nav-number">2.</span> <span class="nav-text"><a href="#&#x7ED3;&#x675F;&#x5206;&#x53F7;" class="headerlink" title="&#x7ED3;&#x675F;&#x5206;&#x53F7;"></a>&#x7ED3;&#x675F;&#x5206;&#x53F7;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#大小写"><span class="nav-number">3.</span> <span class="nav-text"><a href="#&#x5927;&#x5C0F;&#x5199;" class="headerlink" title="&#x5927;&#x5C0F;&#x5199;"></a>&#x5927;&#x5C0F;&#x5199;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#空白字符"><span class="nav-number">4.</span> <span class="nav-text"><a href="#&#x7A7A;&#x767D;&#x5B57;&#x7B26;" class="headerlink" title="&#x7A7A;&#x767D;&#x5B57;&#x7B26;"></a>&#x7A7A;&#x767D;&#x5B57;&#x7B26;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#distinct"><span class="nav-number">5.</span> <span class="nav-text"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#限制输出结果"><span class="nav-number">6.</span> <span class="nav-text"><a href="#&#x9650;&#x5236;&#x8F93;&#x51FA;&#x7ED3;&#x679C;" class="headerlink" title="&#x9650;&#x5236;&#x8F93;&#x51FA;&#x7ED3;&#x679C;"></a>&#x9650;&#x5236;&#x8F93;&#x51FA;&#x7ED3;&#x679C;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">7.</span> <span class="nav-text"><a href="#&#x6CE8;&#x91CA;" class="headerlink" title="&#x6CE8;&#x91CA;"></a>&#x6CE8;&#x91CA;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排序"><span class="nav-number">8.</span> <span class="nav-text"><a href="#&#x6392;&#x5E8F;" class="headerlink" title="&#x6392;&#x5E8F;"></a>&#x6392;&#x5E8F;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#where-子句操作符"><span class="nav-number">9.</span> <span class="nav-text"><a href="#where-&#x5B50;&#x53E5;&#x64CD;&#x4F5C;&#x7B26;" class="headerlink" title="where &#x5B50;&#x53E5;&#x64CD;&#x4F5C;&#x7B26;"></a>where &#x5B50;&#x53E5;&#x64CD;&#x4F5C;&#x7B26;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组合-where-子句"><span class="nav-number">10.</span> <span class="nav-text"><a href="#&#x7EC4;&#x5408;-where-&#x5B50;&#x53E5;" class="headerlink" title="&#x7EC4;&#x5408; where &#x5B50;&#x53E5;"></a>&#x7EC4;&#x5408; where &#x5B50;&#x53E5;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通配符"><span class="nav-number">11.</span> <span class="nav-text"><a href="#&#x901A;&#x914D;&#x7B26;" class="headerlink" title="&#x901A;&#x914D;&#x7B26;"></a>&#x901A;&#x914D;&#x7B26;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拼接字段"><span class="nav-number">12.</span> <span class="nav-text"><a href="#&#x62FC;&#x63A5;&#x5B57;&#x6BB5;" class="headerlink" title="&#x62FC;&#x63A5;&#x5B57;&#x6BB5;"></a>&#x62FC;&#x63A5;&#x5B57;&#x6BB5;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#别名"><span class="nav-number">13.</span> <span class="nav-text"><a href="#&#x522B;&#x540D;" class="headerlink" title="&#x522B;&#x540D;"></a>&#x522B;&#x540D;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">14.</span> <span class="nav-text"><a href="#&#x51FD;&#x6570;" class="headerlink" title="&#x51FD;&#x6570;"></a>&#x51FD;&#x6570;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#聚集函数"><span class="nav-number">15.</span> <span class="nav-text"><a href="#&#x805A;&#x96C6;&#x51FD;&#x6570;" class="headerlink" title="&#x805A;&#x96C6;&#x51FD;&#x6570;"></a>&#x805A;&#x96C6;&#x51FD;&#x6570;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分组数据"><span class="nav-number">16.</span> <span class="nav-text"><a href="#&#x5206;&#x7EC4;&#x6570;&#x636E;" class="headerlink" title="&#x5206;&#x7EC4;&#x6570;&#x636E;"></a>&#x5206;&#x7EC4;&#x6570;&#x636E;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子句顺序"><span class="nav-number">17.</span> <span class="nav-text"><a href="#&#x5B50;&#x53E5;&#x987A;&#x5E8F;" class="headerlink" title="&#x5B50;&#x53E5;&#x987A;&#x5E8F;"></a>&#x5B50;&#x53E5;&#x987A;&#x5E8F;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子查询"><span class="nav-number">18.</span> <span class="nav-text"><a href="#&#x5B50;&#x67E5;&#x8BE2;" class="headerlink" title="&#x5B50;&#x67E5;&#x8BE2;"></a>&#x5B50;&#x67E5;&#x8BE2;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#联结查询"><span class="nav-number">19.</span> <span class="nav-text"><a href="#&#x8054;&#x7ED3;&#x67E5;&#x8BE2;" class="headerlink" title="&#x8054;&#x7ED3;&#x67E5;&#x8BE2;"></a>&#x8054;&#x7ED3;&#x67E5;&#x8BE2;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#内联结"><span class="nav-number">19.1.</span> <span class="nav-text"><a href="#&#x5185;&#x8054;&#x7ED3;" class="headerlink" title="&#x5185;&#x8054;&#x7ED3;"></a>&#x5185;&#x8054;&#x7ED3;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#外联结"><span class="nav-number">19.2.</span> <span class="nav-text"><a href="#&#x5916;&#x8054;&#x7ED3;" class="headerlink" title="&#x5916;&#x8054;&#x7ED3;"></a>&#x5916;&#x8054;&#x7ED3;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组合查询"><span class="nav-number">20.</span> <span class="nav-text"><a href="#&#x7EC4;&#x5408;&#x67E5;&#x8BE2;" class="headerlink" title="&#x7EC4;&#x5408;&#x67E5;&#x8BE2;"></a>&#x7EC4;&#x5408;&#x67E5;&#x8BE2;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插入"><span class="nav-number">21.</span> <span class="nav-text"><a href="#&#x63D2;&#x5165;" class="headerlink" title="&#x63D2;&#x5165;"></a>&#x63D2;&#x5165;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更新"><span class="nav-number">22.</span> <span class="nav-text"><a href="#&#x66F4;&#x65B0;" class="headerlink" title="&#x66F4;&#x65B0;"></a>&#x66F4;&#x65B0;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除"><span class="nav-number">23.</span> <span class="nav-text"><a href="#&#x5220;&#x9664;" class="headerlink" title="&#x5220;&#x9664;"></a>&#x5220;&#x9664;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作表"><span class="nav-number">24.</span> <span class="nav-text"><a href="#&#x64CD;&#x4F5C;&#x8868;" class="headerlink" title="&#x64CD;&#x4F5C;&#x8868;"></a>&#x64CD;&#x4F5C;&#x8868;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建表"><span class="nav-number">24.1.</span> <span class="nav-text"><a href="#&#x521B;&#x5EFA;&#x8868;" class="headerlink" title="&#x521B;&#x5EFA;&#x8868;"></a>&#x521B;&#x5EFA;&#x8868;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改表"><span class="nav-number">24.2.</span> <span class="nav-text"><a href="#&#x4FEE;&#x6539;&#x8868;" class="headerlink" title="&#x4FEE;&#x6539;&#x8868;"></a>&#x4FEE;&#x6539;&#x8868;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除表"><span class="nav-number">24.3.</span> <span class="nav-text"><a href="#&#x5220;&#x9664;&#x8868;" class="headerlink" title="&#x5220;&#x9664;&#x8868;"></a>&#x5220;&#x9664;&#x8868;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重命名表"><span class="nav-number">24.4.</span> <span class="nav-text"><a href="#&#x91CD;&#x547D;&#x540D;&#x8868;" class="headerlink" title="&#x91CD;&#x547D;&#x540D;&#x8868;"></a>&#x91CD;&#x547D;&#x540D;&#x8868;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#视图"><span class="nav-number">25.</span> <span class="nav-text"><a href="#&#x89C6;&#x56FE;" class="headerlink" title="&#x89C6;&#x56FE;"></a>&#x89C6;&#x56FE;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#存储过程"><span class="nav-number">26.</span> <span class="nav-text"><a href="#&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;"></a>&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务"><span class="nav-number">27.</span> <span class="nav-text"><a href="#&#x4E8B;&#x52A1;" class="headerlink" title="&#x4E8B;&#x52A1;"></a>&#x4E8B;&#x52A1;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#游标"><span class="nav-number">28.</span> <span class="nav-text"><a href="#&#x6E38;&#x6807;" class="headerlink" title="&#x6E38;&#x6807;"></a>&#x6E38;&#x6807;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#约束"><span class="nav-number">29.</span> <span class="nav-text"><a href="#&#x7EA6;&#x675F;" class="headerlink" title="&#x7EA6;&#x675F;"></a>&#x7EA6;&#x675F;</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#主键约束"><span class="nav-number">29.1.</span> <span class="nav-text"><a href="#&#x4E3B;&#x952E;&#x7EA6;&#x675F;" class="headerlink" title="&#x4E3B;&#x952E;&#x7EA6;&#x675F;"></a>&#x4E3B;&#x952E;&#x7EA6;&#x675F;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#外键约束"><span class="nav-number">29.2.</span> <span class="nav-text"><a href="#&#x5916;&#x952E;&#x7EA6;&#x675F;" class="headerlink" title="&#x5916;&#x952E;&#x7EA6;&#x675F;"></a>&#x5916;&#x952E;&#x7EA6;&#x675F;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#唯一约束"><span class="nav-number">29.3.</span> <span class="nav-text"><a href="#&#x552F;&#x4E00;&#x7EA6;&#x675F;" class="headerlink" title="&#x552F;&#x4E00;&#x7EA6;&#x675F;"></a>&#x552F;&#x4E00;&#x7EA6;&#x675F;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#检查约束"><span class="nav-number">29.4.</span> <span class="nav-text"><a href="#&#x68C0;&#x67E5;&#x7EA6;&#x675F;" class="headerlink" title="&#x68C0;&#x67E5;&#x7EA6;&#x675F;"></a>&#x68C0;&#x67E5;&#x7EA6;&#x675F;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#索引"><span class="nav-number">30.</span> <span class="nav-text"><a href="#&#x7D22;&#x5F15;" class="headerlink" title="&#x7D22;&#x5F15;"></a>&#x7D22;&#x5F15;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#触发器"><span class="nav-number">31.</span> <span class="nav-text"><a href="#&#x89E6;&#x53D1;&#x5668;" class="headerlink" title="&#x89E6;&#x53D1;&#x5668;"></a>&#x89E6;&#x53D1;&#x5668;</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shenlin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
