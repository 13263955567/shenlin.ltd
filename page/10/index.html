<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="A Programmer&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="shenlin&#39;s blog">
<meta property="og:url" content="http://www.shenlin.ltd/page/10/index.html">
<meta property="og:site_name" content="shenlin&#39;s blog">
<meta property="og:description" content="A Programmer&apos;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="shenlin&#39;s blog">
<meta name="twitter:description" content="A Programmer&apos;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.shenlin.ltd/page/10/"/>





  <title>shenlin's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">shenlin's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">what the fuck?!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 6.1 - GitHub 创建账户和配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 6.1 - GitHub 创建账户和配置/" itemprop="url">chapter 6.1 - GitHub 创建账户和配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>GitHub 是最大的 Git 版本库托管商，免费账户的版本库都将被公开，收费账户可以有私有版本库，如果只是克隆公开的版本库，无需注册账户</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/19/Git - ProGit Chapter 6.1 - GitHub 创建账户和配置/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 4.9 - 第三方托管/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 4.9 - 第三方托管/" itemprop="url">chapter 4.9 - Git 第三方托管</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="远程库简介"><a href="#远程库简介" class="headerlink" title="远程库简介"></a>远程库简介</h2><p>为了使用 Git 协作功能，还需要有远程的 Git 仓库。</p>
<p>技术实现上是可以从个人仓库进行推送（push）和拉取（pull）来修改内容，但不鼓励使用个人仓库作为公用仓库，原因：</p>
<ul>
<li>很容易弄混其他人的进度</li>
<li>合作者们希望在你的电脑未联机时亦能存取仓库</li>
</ul>
<p>因此与他人合作的最佳方法即是建立一个你与合作者们都有权利访问，且可从那里推送和拉取资料的可靠的共用仓库。</p>
<p>一个远程仓库通常只是一个裸仓库（bare repository）— 即一个没有当前工作目录的仓库。<br>因为该仓库仅仅作为合作媒介，不需要从磁碟检查快照；存放的只有 Git 的资料。<br>简单的说，裸仓库就是你工程目录内的 .git 子目录内容，不包含其他资料。</p>
<h2 id="第三方托管"><a href="#第三方托管" class="headerlink" title="第三方托管"></a>第三方托管</h2><p>如果不想设立自己的 Git 服务器，可以选择把 Git 项目托管到一个外部专业的托管网站。</p>
<p>好处：</p>
<ol>
<li><p>托管网站可以用来快速建立并开始项目，且无需进行服务器维护和监控工作。</p>
</li>
<li><p>即使有自己的 Git 服务器，仍然可以把<strong>开源代码</strong>托管在公共托管网站，这通常更有助于开源社区来发现和帮助你。</p>
</li>
</ol>
<p>托管网站列表，请浏览 Git 维基的 GitHosting 页面 <a href="https://git.wiki.kernel.org/index.php/GitHosting" target="_blank" rel="noopener">https://git.wiki.kernel.org/index.php/GitHosting</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 5.1 - 分布式工作流程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 5.1 - 分布式工作流程/" itemprop="url">chapter 5.1 - Git 分布式工作流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 4.2~4.6 - 搭建 Git 服务器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 4.2~4.6 - 搭建 Git 服务器/" itemprop="url">chapter 4.2~4.6 - 搭建 Git 服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="导出裸仓库"><a href="#导出裸仓库" class="headerlink" title="导出裸仓库"></a>导出裸仓库</h2><p>把现有仓库导出为裸仓库，按照惯例，裸仓库目录名以 .git 结尾</p>
<p>导出裸仓库就是只取出 git 仓库自身，不要工作目录，并为裸仓库单独创建一个 .git 结尾目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//不能在项目目录下导</span><br><span class="line">ssl@sslnotebook MINGW32 /d/gitgo (master)</span><br><span class="line">$ git clone --bare gitgo gitgo.git</span><br><span class="line">fatal: repository &apos;gitgo&apos; does not exist</span><br><span class="line"></span><br><span class="line">//进入项目上级目录</span><br><span class="line">ssl@sslnotebook MINGW32 /d/gitgo (master)</span><br><span class="line">$ cd ..</span><br><span class="line"></span><br><span class="line">//使用 --bare 选项导出裸仓库</span><br><span class="line">ssl@sslnotebook MINGW32 /d</span><br><span class="line">$ git clone --bare gitgo gitgo.git</span><br><span class="line">Cloning into bare repository &apos;gitgo.git&apos;...</span><br><span class="line">done.</span><br><span class="line"></span><br><span class="line">//导出的裸仓库和项目位于同级目录，内容是 gitgo/.git 的文件</span><br><span class="line">ssl@sslnotebook MINGW32 /d</span><br><span class="line">$ ll gitgo.git</span><br><span class="line">total 16</span><br><span class="line">-rw-r--r-- 1 ssl 197121 138 七月  5 06:50 config</span><br><span class="line">-rw-r--r-- 1 ssl 197121  73 七月  5 06:50 description</span><br><span class="line">-rw-r--r-- 1 ssl 197121  23 七月  5 06:50 HEAD</span><br><span class="line">drwxr-xr-x 1 ssl 197121   0 七月  5 06:50 hooks/</span><br><span class="line">drwxr-xr-x 1 ssl 197121   0 七月  5 06:50 info/</span><br><span class="line">drwxr-xr-x 1 ssl 197121   0 七月  5 06:50 objects/</span><br><span class="line">-rw-r--r-- 1 ssl 197121 542 七月  5 06:50 packed-refs</span><br><span class="line">drwxr-xr-x 1 ssl 197121   0 七月  5 06:50 refs/</span><br></pre></td></tr></table></figure>
<p>效果和下面的命令大致相同，但不完全一样，下面的命令是完全复制，包含的文件比 <code>git clone --bare</code> 要多<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git cp -Rf gitgo/.git gitgo.git</span><br></pre></td></tr></table></figure></p>
<h2 id="把裸仓库放服务器上"><a href="#把裸仓库放服务器上" class="headerlink" title="把裸仓库放服务器上"></a>把裸仓库放服务器上</h2><p>把裸仓库放到服务器<code>example.com</code>的<code>/opt/git</code>目录下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ scp -r gitgo.git user@example.com:/opt/git</span><br></pre></td></tr></table></figure></p>
<p>对目录 <code>/opt/git</code> 有读权限的用户可以通过 SSH 克隆仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone user@example.com:/opt/git/gitgo.git</span><br></pre></td></tr></table></figure></p>
<p>对 <code>/opt/git</code> 目录有写权限的用户将自动拥有推送权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br></pre></td></tr></table></figure></p>
<p>在该项目目录中运行 git init 命令，并加上 –shared 选项，那么 Git 会自动修改该仓库目录的组权限为可写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh user@git.example.com</span><br><span class="line">$ cd /opt/git/gitgo.git</span><br><span class="line">$ git init --bare --shared</span><br></pre></td></tr></table></figure></p>
<hr>
<p>架设一个几个人拥有连接权的 git 服务器的简单步骤：</p>
<ol>
<li>导出裸仓库</li>
<li>把裸仓库放入大家有读写权限的目录</li>
<li>服务器上加入可以使用 SSH 协议访问的账号</li>
</ol>
<p>更多设定：<br>如何避免为每一个用户建立一个账户<br>给仓库添加公共读取权限<br>架设网页界面<br>……</p>
<p>架设 Git 服务最复杂的地方在于用户管理。如果需要仓库对特定的用户可读，而给另一部分用户读写权限，那么访问和许可安排就会比较困难。</p>
<p>给团队每个成员提供访问权的方法： </p>
<ol>
<li><p>给团队里的每个人创建账号，这种方法很直接但也很麻烦。要为每个人运行一次 adduser 并且设置临时密码，然后使用服务器操作系统的文件系统权限在仓库上设置更复杂的访问控制权限。</p>
</li>
<li><p>如果需要团队里的每个人都对仓库有写权限，又不能给每个人在服务器上建立账户，那么提供 SSH 连接就是唯一的选择了。 </p>
<p> 2.1 在主机上建立一个 git 账户，让每个需要写权限的人发送一个 SSH 公钥，然后将其加入 git 账户的 ~/.ssh/authorized_keys 文件。这样所有人都将通过 git 账户访问主机。 这一点也不会影响提交的数据——访问主机用的身份不会影响提交对象的提交者信息。</p>
<p> 2.2 让 SSH 服务器通过某个 LDAP 服务，或者其他已经设定好的集中授权机制，来进行授权。只要每个用户可以获得主机的 shell 访问权限，任何 SSH 授权机制都可视为是有效的。</p>
</li>
</ol>
<hr>
<h2 id="设置协议"><a href="#设置协议" class="headerlink" title="设置协议"></a>设置协议</h2><p><a href="https://help.github.com/articles/connecting-to-github-with-ssh/" target="_blank" rel="noopener">https://help.github.com/articles/connecting-to-github-with-ssh/</a></p>
<h3 id="配置-SSH-协议"><a href="#配置-SSH-协议" class="headerlink" title="配置 SSH 协议"></a>配置 SSH 协议</h3><h4 id="设置-SSH-连接"><a href="#设置-SSH-连接" class="headerlink" title="设置 SSH 连接"></a>设置 SSH 连接</h4><h4 id="生成-SSH-公钥"><a href="#生成-SSH-公钥" class="headerlink" title="生成 SSH 公钥"></a>生成 SSH 公钥</h4><h5 id="公钥文件"><a href="#公钥文件" class="headerlink" title="公钥文件"></a>公钥文件</h5><ul>
<li>私钥文件：id_dsa 或 id_rsa</li>
<li>公钥文件：id_dsa_pub 或 id_rsa_pub</li>
</ul>
<h5 id="保存位置"><a href="#保存位置" class="headerlink" title="保存位置"></a>保存位置</h5><p>linux 一般位于 <code>~/.ssh</code><br>windows 一般位于 <code>$HOME\.ssh</code></p>
<h5 id="生成公钥"><a href="#生成公钥" class="headerlink" title="生成公钥"></a>生成公钥</h5><p>确认当前用户是否已经有 SSH 公钥，查看 SSH 公钥的保存目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ll ~/.ssh</span><br></pre></td></tr></table></figure></p>
<p>没有 SSH 公钥，则使用命令生成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/home/ssy/.ssh/id_rsa): </span><br><span class="line">/home/ssy/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /home/ssy/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /home/ssy/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">ca:dc:d4:50:cf:06:e6:10:2b:cf:62:11:c8:8a:5e:52 ssy@e42.matrix</span><br><span class="line">The key&apos;s randomart image is:</span><br><span class="line">+--[ RSA 2048]----+</span><br><span class="line">|   . .. o.+      |</span><br><span class="line">|   Eo  . * +     |</span><br><span class="line">| ...  o o . +    |</span><br><span class="line">|....   = o .     |</span><br><span class="line">|. o   o S .      |</span><br><span class="line">| .   + =         |</span><br><span class="line">|      + .        |</span><br><span class="line">|                 |</span><br><span class="line">|                 |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure></p>
<ul>
<li>可重复生成，会提示你是否覆盖</li>
<li>生成的过程中会要求输入秘钥口令，如果不想使用秘钥的过程中输入口令，直接回车即可</li>
</ul>
<p>查看 SSH 公钥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat .ssh/id_rsa.pub</span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvjO/J+qlOOr7Hd7x4gpJoZ2DU7gtI8V6juE60ULXzMGezQFce56JB2dGOp5iUgAXzLVv8p40KURjiOO8El1UVC6baibsTzDTP9hUu1oHA/a9R6iuz03P43hYYPtuCZu34sMHAlaj+ufzAR6loPeD3ubtKgjKH+nR0A8BsZGSdzyiofhJSz+APYxvtOovWCkjZ09t5qffmcLcZ/S53LguXvLnirgmxMzSruJJ3Y8y6YpEKDdkeIWThV+kojIOxsudVWGVxXYInZe0te/LzwvHITtlJh7tzFnKgSwwQIxuyETqLacbWKg4qsnmuAc22M5aGzI3X2DIMLRGnSSREctl0Q== ssy@bogon</span><br></pre></td></tr></table></figure></p>
<p>生成后可使用邮件等方式把公钥发送给 git 管理员</p>
<h4 id="配置-SSH-访问"><a href="#配置-SSH-访问" class="headerlink" title="配置 SSH 访问"></a>配置 SSH 访问</h4><p>使用 authorized_keys 方法对用户进行认证。</p>
<p>创建用户 git，并建立目录 .ssh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo adduser git</span><br><span class="line">$ su git</span><br><span class="line">$ cd ~</span><br><span class="line">$ mkdir .ssh &amp;&amp; chmod 700 .ssh</span><br><span class="line">$ touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure></p>
<p>把公钥文件导入 authorized_keys 文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat /tmp/id_rsa.john.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">$ cat /tmp/id_rsa.mike.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">$ cat /tmp/id_rsa.jessica.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></p>
<p>建立裸仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/git</span><br><span class="line">$ mkdir project.git</span><br><span class="line">$ cd project.git</span><br><span class="line">$ git init --bare</span><br><span class="line">Initialized empty Git repository in /opt/git/project.git/</span><br></pre></td></tr></table></figure></p>
<p>john把自己的推送文件到裸库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cd johnProject</span><br><span class="line">$ git init</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m &apos;initial commit&apos;</span><br><span class="line">$ git remote add origin git@gitserver:/opt/git/project.git</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure></p>
<p>其他开发者可以克隆仓库并推送自己的改动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@gitserver:/opt/git/project.git</span><br><span class="line">$ cd project</span><br><span class="line">$ vim readme</span><br><span class="line">$ git commit -m &apos;modified the readme file&apos;</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure></p>
<h4 id="关于-shell-权限"><a href="#关于-shell-权限" class="headerlink" title="关于 shell 权限"></a>关于 shell 权限</h4><p>上述例子中所有的开发者都是以 linux 系统用户 git 身份访问 git 仓库，这意味着他们也可以使用这个 git 身份登录服务器并执行 bash 命令，通常我们只想让开发者凭借 git 这个身份使用 SSH 协议连接到服务器推送和拉取 git 仓库……</p>
<p>这时可以使用 <code>chsh</code> 命令修改 git 用户的 shell：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//两个命令效果相同</span><br><span class="line">$ sudo chsh -s $(which git-shell) git</span><br><span class="line">$ sudo chsh -s /usr/bin/git-shell git</span><br><span class="line">Changing shell for git.</span><br><span class="line">Shell changed.</span><br><span class="line"></span><br><span class="line">//也可直接修改passwd文件</span><br><span class="line">$ sudo vi /etc/passwd</span><br></pre></td></tr></table></figure></p>
<ul>
<li>git-shell 是一个受限 shell 工具，可以把 git 用户的活动限制在 git 相关的范围之内</li>
<li>git-shell 由 git 软件包提供</li>
<li>更改 shell 前需要把 git-shell 的路径加入 /etc/shells 文件，否则会提示 Warning: “/usr/bin/git-shell” is not listed in /etc/shells.</li>
</ul>
<p>再次用 git 登录则会提示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ssh git@gitserver</span><br><span class="line">fatal: Interactive git shell is not enabled</span><br><span class="line">hint: ~/git-shell-commands should exist and have read and execute access.</span><br><span class="line">Connection to gitserver closed.</span><br><span class="line"></span><br><span class="line">$ su git</span><br><span class="line">fatal: What do you think I am? A shell?</span><br></pre></td></tr></table></figure></p>
<ul>
<li>可以在 git 用户的家目录下面建立 git-shell-commands 目录</li>
<li>此目录允许你对 git-shell 命令进行一定程度的自定义<ul>
<li>可以限制掉某些本应被服务器接受的 Git 命令</li>
<li>对 SSH 拒绝登录信息进行自定义</li>
</ul>
</li>
</ul>
<h3 id="配置-git-协议的守护进程"><a href="#配置-git-协议的守护进程" class="headerlink" title="配置 git 协议的守护进程"></a>配置 git 协议的守护进程</h3><p>使用 git 协议的仓库是基于守护进程的。</p>
<p>git-daemon 是独立于 git 的另外一个软件包。</p>
<h4 id="git-daemon-export-ok-和-whitelist"><a href="#git-daemon-export-ok-和-whitelist" class="headerlink" title="git-daemon-export-ok 和 whitelist"></a>git-daemon-export-ok 和 whitelist</h4><p>守护进程 git daemon 默认会寻找 git 库根目录下的一个神奇文件 git-daemon-export-ok，当有这个文件时，表示允许 git 协议无授权的访问，但是如果 git daemon 使用了选项 –export-all，则无论目录是否有此神奇文件，只要目录包含了objects和refs两个子目录看起来像 git 库都会允许无授权的访问</p>
<p>git daemon 命令后面可有多个空格隔开的目录，如<code>git daemon /pub/bar /pub/foo</code>这是白名单目录，是明确允许无授权访问的目录</p>
<p>git daemon 如果使用了 –strict-paths 选项，但没有指定白名单，则 git daemon 不会启动</p>
<p>???测试有了白名单，神奇文件是否还起作用</p>
<h4 id="运行守护进程"><a href="#运行守护进程" class="headerlink" title="运行守护进程"></a>运行守护进程</h4><ul>
<li><p><strong>注意</strong>：使用交互式命令行直接运行下面命令则会停留在此处，不会出现新的命令提示符，Ctrl+c 结束此命令则 git-daemon 进程结束，也可以先用 Ctrl+z 把命令放入挂起到后台，然后用<code>jobs</code>查看其任务号 n，再用<code>bg n</code>让命令在后台运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git daemon --reuseaddr --base-path=/opt/git /opt/git</span><br></pre></td></tr></table></figure>
</li>
<li><p>–reuseaddr</p>
<ul>
<li>绑定监听套接字时使用 SO_REUSEADDR </li>
<li>允许服务器在无需等待旧连接超时的情况下重启</li>
</ul>
</li>
<li>–base-path<ul>
<li>指定 git 仓库的根路径，用户 git 协议中的路径被作为相对路径来看待</li>
<li>如 git://exmaple.com/hello.git，则将被解释为 /opt/git/hello.git </li>
</ul>
</li>
<li>结尾的路径是白名单告诉 Git 守护进程从何处寻找仓库来导出。</li>
<li>如果有防火墙正在运行，需要开放端口 9418 的通信权限</li>
<li>出于安全考虑，强烈建议使用一个对仓库拥有只读权限的用户身份来运行该守护进程，如新建用户git-ro</li>
</ul>
<h4 id="创建-git-daemon-export-ok-文件"><a href="#创建-git-daemon-export-ok-文件" class="headerlink" title="创建 git-daemon-export-ok 文件"></a>创建 git-daemon-export-ok 文件</h4><p>告诉 Git 哪些仓库允许基于服务器的无授权访问<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /path/to/project.git</span><br><span class="line">$ touch git-daemon-export-ok</span><br></pre></td></tr></table></figure></p>
<ul>
<li>有 git-daemon-export-ok 文件的仓库表示允许 Git 提供无需授权的项目访问服务</li>
</ul>
<h3 id="配置-Smart-HTTP-协议"><a href="#配置-Smart-HTTP-协议" class="headerlink" title="配置 Smart HTTP 协议"></a>配置 Smart HTTP 协议</h3><p>git 自带的 CGI 脚本 git-http-backend 会读取由 git fetch 或 git push 命令发送的 HTTP 请求路径和头部信息，来判断该客户端是否支持 HTTP 智能（Smart）模式，若支持 git 将会以智能模式与客户端进行通信，否则会回落到哑（Dumb）模式下（对某些老的客户端实现向下兼容）。</p>
<h4 id="安装-CGI-服务器和相关模块"><a href="#安装-CGI-服务器和相关模块" class="headerlink" title="安装 CGI 服务器和相关模块"></a>安装 CGI 服务器和相关模块</h4><p>安装 Apache 作为 CGI 服务器，并启用所需的模块：mod_cgi, mod_alias, mod_env<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y apache2 apache2-utils</span><br><span class="line">$ a2enmod cgi alias env</span><br></pre></td></tr></table></figure></p>
<h4 id="配置-CGI-服务器"><a href="#配置-CGI-服务器" class="headerlink" title="配置 CGI 服务器"></a>配置 CGI 服务器</h4><ol>
<li>配置 apache 文件让 git-http-backend 来处理 /git 路径的请求<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SetEnv GIT_PROJECT_ROOT /opt/git</span><br><span class="line">SetEnv GIT_HTTP_EXPORT_ALL</span><br><span class="line">ScriptAlias /git/ /usr/lib/git-core/git-http-backend/</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>留空 GIT_HTTP_EXPORT_ALL 这个环境变量，Git 将只对无授权客户端提供带 git-daemon-export-ok 文件的版本库，就像 Git 守护进程一样</li>
</ul>
<p><strong>下面的2，3步中英文不一样啊，应该是殊途同归，英文版的库路径是/srv/git</strong></p>
<ol>
<li>英文版<br>You’ll also need to set the Unix user group of the /srv/git directories to www-data so your web server can read- and write-access the repositories, because the Apache instance running the CGI script will (by default) be running as that user:</li>
</ol>
<p>apache 运行 CGI 脚本默认是以用户组 www-data 身份运行，所以要设置 git 库目录的所属用户组为 www-data 用户组，才有读写权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chgrp -R www-data /srv/git</span><br></pre></td></tr></table></figure></p>
<ul>
<li>我的没有这个用户组???</li>
</ul>
<ol>
<li><p>中文版<br>让 Apache 接受通过该路径的请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory &quot;/usr/lib/git-core*&quot;&gt;</span><br><span class="line">   Options ExecCGI Indexes</span><br><span class="line">   Order allow,deny</span><br><span class="line">   Allow from all</span><br><span class="line">   Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>中文版<br>实现写操作授权验证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;LocationMatch &quot;^/git/.*/git-receive-pack$&quot;&gt;</span><br><span class="line">    AuthType Basic</span><br><span class="line">    AuthName &quot;Git Access&quot;</span><br><span class="line">    AuthUserFile /opt/git/.htpasswd</span><br><span class="line">    Require valid-user</span><br><span class="line">&lt;/LocationMatch&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>需要创建一个包含所有合法用户密码的 .htpasswd 文件。</li>
<li>下面是添加 “schacon” 用户到此文件的例子：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//中文版</span><br><span class="line">$ htdigest -c /opt/git/.htpasswd &quot;Git Access&quot; schacon</span><br><span class="line"></span><br><span class="line">//英文版</span><br><span class="line">$ htpasswd -c /srv/git/.htpasswd schacon</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>英文版<br>tell Apache to allow requests to git-http-backend and make writes be authenticated somehow, possibly with an Auth block like this:</li>
</ol>
<p>让 Apache 允许访问 git-http-backend，并且实现写操作授权<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Files &quot;git-http-backend&quot;&gt;</span><br><span class="line">    AuthType Basic</span><br><span class="line">    AuthName &quot;Git Access&quot;</span><br><span class="line">    AuthUserFile /srv/git/.htpasswd</span><br><span class="line">    Require expr !(%&#123;QUERY_STRING&#125; -strmatch &apos;*service=git-receive-pack*&apos; || %&#123;REQUEST_URI&#125; =~ m#/git-receive-pack$#)</span><br><span class="line">    Require valid-user</span><br><span class="line">&lt;/Files&gt;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 4.7,4.8 - GitWeb & GitLab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 4.7,4.8 - GitWeb & GitLab/" itemprop="url">chapter 4.7,4.8 - GitWeb & GitLab</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>GitWeb 是一个基于网页的 Git 库简易查看器，使用 CGI 脚本实现。</p>
<p>GitLab 是一个功能更全面的 Git 服务器，是一个数据库支持的 Web 应用。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/19/Git - ProGit Chapter 4.7,4.8 - GitWeb & GitLab/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 4.1 - 协议/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 4.1 - 协议/" itemprop="url">chapter 4.1 - Git 协议</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>git 可以使用四种协议来传输数据：<br>本地协议（Local Protocal）<br>HTTP协议<br>SSH协议（Secure SHell）<br>Git协议</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/19/Git - ProGit Chapter 4.1 - 协议/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 3.4 - 变基/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 3.4 - 变基/" itemprop="url">chapter 3.4 - Git 变基</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="合并和变基"><a href="#合并和变基" class="headerlink" title="合并和变基"></a>合并和变基</h2><p>git 中整合分支主要两个方法：合并 和 变基。</p>
<p>举例说明：开发任务分叉到两个不同分支： experiment 和 master</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-1.png" alt=""></p>
<h2 id="使用-merge-命令合并"><a href="#使用-merge-命令合并" class="headerlink" title="使用 merge 命令合并"></a>使用 merge 命令合并</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge experiment</span><br></pre></td></tr></table></figure>
<p>会把两个分支的最新快照 C3 和 C4 以及两者最近的共同祖先 C2 进行三方整合，合并的结果是生成一个新快照 C5 并提交。</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-2.png" alt=""></p>
<h2 id="使用-rebase-命令合并"><a href="#使用-rebase-命令合并" class="headerlink" title="使用 rebase 命令合并"></a>使用 rebase 命令合并</h2><h3 id="变基合并过程"><a href="#变基合并过程" class="headerlink" title="变基合并过程"></a>变基合并过程</h3><h4 id="1-先变基"><a href="#1-先变基" class="headerlink" title="1. 先变基"></a>1. 先变基</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout experiment</span><br><span class="line">$ git rebase master</span><br><span class="line"></span><br><span class="line">//上面的两条命令也可以简化为：</span><br><span class="line">$ git rebase master experiment</span><br></pre></td></tr></table></figure>
<p>将提取在 C4 中引入的补丁和修改，然后在 C3 的基础上应用一次。 在 Git 中，这种操作就叫做 变基。<br>rebase 命令可以将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。</p>
<p>具体原理：</p>
<ol>
<li>找到当前分支最新快照 C4、目标基底分支最新快照 C3 的最近共同祖先 C2</li>
<li>对比当前分支 C4 相对于祖先 C2 的历次提交，提取相应的修改并存为临时文件</li>
<li>把当前分支指向目标基底 C3</li>
<li>将之前另存为临时文件的修改依序应用。</li>
</ol>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-3.png" alt=""></p>
<h4 id="2-再快进合并"><a href="#2-再快进合并" class="headerlink" title="2. 再快进合并"></a>2. 再快进合并</h4><p>回到 master 分支，执行一次快进合并</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge experiment</span><br></pre></td></tr></table></figure>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-4.png" alt=""></p>
<h3 id="把“重放”应用到第三方分支"><a href="#把“重放”应用到第三方分支" class="headerlink" title="把“重放”应用到第三方分支"></a>把“重放”应用到第三方分支</h3><p>在对两个分支进行变基时，所生成的“重放”并不一定要在目标分支上应用，也可以把“重放”应用到另外的分支，使用<code>--onto</code>选项指定新基底分支： </p>
<p><code>git rebase --onto NewBase basebranch topicbranch</code></p>
<p>举例说明：</p>
<p>现有分支如下，master、server、client，要把 client 分支的 C8, C9 提交更新到 master 分支，但不包含 server 的 C3 提交</p>
<p><img src="https://git-scm.com/book/en/v2/images/interesting-rebase-1.png" alt=""></p>
<p>则可以执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase --onto master server client</span><br></pre></td></tr></table></figure></p>
<p><img src="https://git-scm.com/book/en/v2/images/interesting-rebase-2.png" alt=""></p>
<p>再执行一次快进合并即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge client</span><br></pre></td></tr></table></figure></p>
<p><img src="https://git-scm.com/book/en/v2/images/interesting-rebase-3.png" alt=""></p>
<p>把 server 分支也变基到 master<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase master server</span><br></pre></td></tr></table></figure></p>
<p><img src="https://git-scm.com/book/en/v2/images/interesting-rebase-4.png" alt=""></p>
<p>再次执行快进合并<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge server</span><br></pre></td></tr></table></figure></p>
<p>删除分支<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d client</span><br><span class="line">$ git branch -d server</span><br></pre></td></tr></table></figure></p>
<p><img src="https://git-scm.com/book/en/v2/images/interesting-rebase-5.png" alt=""></p>
<h2 id="合并和变基区别"><a href="#合并和变基区别" class="headerlink" title="合并和变基区别"></a>合并和变基区别</h2><p>由上面的例子可以看出：</p>
<p>变基是将一系列提交按照原有次序依次应用到另一分支上，而合并是把最终结果合在一起。</p>
<p>合并和变基这两种方法的整合结果没有区别，但提交历史不同，<strong>变基使得提交历史变得更加简洁，查看一个经过变基的分支的历史记录时会发现，尽管实际的开发工作是并行的，但它们看上去就像是串行的一样，提交历史是一条直线没有分叉</strong>。</p>
<h2 id="使用变基的目的"><a href="#使用变基的目的" class="headerlink" title="使用变基的目的"></a>使用变基的目的</h2><p>使用变基的目的是为了确保在向远程分支推送时能保持提交历史的整洁——例如向某个其他人维护的项目贡献代码时，你首先在自己的分支里进行开发，当开发完成时你需要先将你的代码变基到 origin/master 上，然后再向主项目提交修改。这样的话，该项目的维护者就不再需要进行整合工作，只需要快进合并便可。</p>
<h2 id="使用变基要注意的问题"><a href="#使用变基要注意的问题" class="headerlink" title="使用变基要注意的问题"></a>使用变基要注意的问题</h2><p><img src="https://git-scm.com/book/en/v2/images/perils-of-rebasing-1.png" alt=""></p>
<p>上图为最初的服务器和本地分支情况</p>
<p><img src="https://git-scm.com/book/en/v2/images/perils-of-rebasing-4.png" alt=""></p>
<p>PersonA 把自己的更新 C5,C4 及一个合并提交 C6 提交到了远程库，然后 PersonB 从远程库 fetch 下来并 merge 到自己的本地分支，然后在此基础上开发，后来 PersonA 又把合并操作 C6 回滚，丢弃了原来的提交 C4,C6 ，改用变基的方式 C4’ 重新提交了相同的代码，并使用<code>git push --force</code>覆盖了服务器上的提交历史，再次提交到了远程库，这时 PeronB 已经在基于 C5、C4、C6 的提交上做了本地开发，则 PersonB 再次拉取远程库时，就会出现问题：</p>
<p>1、会再次拉取 C4’ 合并，但是 C4’ 和 C4 的提交内容是相同的，只不过一个通过合并提交，一个通过变基提交的，同样的代码被合并了两次，而且两个提交对象的日期、作者、日志都是一样的</p>
<p>2、C4 已经被 PersonA 抛弃并被 C4’ 替代，PersonB 在 push 到服务器时，会把抛弃的 C4 再次找回来</p>
<p>Question:<br>所以问题的根本就是代码被提交了两次吧：通过合并一次，通过变基一次</p>
<p><strong>不要对在你的仓库外有副本的分支执行变基。</strong></p>
<h2 id="使用变基解决变基"><a href="#使用变基解决变基" class="headerlink" title="使用变基解决变基"></a>使用变基解决变基</h2><p>Git 除了对整个提交计算 SHA-1 校验和以外，也对本次提交所引入的修改计算了校验和—— 即 “patch-id”。</p>
<p>如果你拉取被覆盖过的更新并将你手头的工作基于此进行变基的话，一般情况下 Git 都能成功分辨出哪些是你的修改，并把它们应用到新分支上。</p>
<p>如上例所示，如果团队中有人推送了经过变基的提交，并丢弃了你的本地开发所基于的一些提交，解决方法是：不执行合并，而是执行 <code>git rebase teamone/master</code>, Git 将会：</p>
<ul>
<li>检查哪些提交是我们的分支上独有的（C2，C3，C4，C6，C7）</li>
<li>检查其中哪些提交不是合并操作的结果（C2，C3，C4）</li>
<li>检查哪些提交在对方覆盖更新时并没有被纳入目标分支（只有 C2 和 C3，因为 C4 其实就是 C4’）</li>
<li>把查到的这些提交应用在 teamone/master 上面</li>
</ul>
<p><img src="https://git-scm.com/book/en/v2/images/perils-of-rebasing-5.png" alt=""></p>
<p>下面三种命令执行方式效果相同：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//更改pull.rebase的默认配置，使得git pull时默认使用选项--rebase</span><br><span class="line">$ git conifg --global pull.rebase true</span><br><span class="line">$ git pull</span><br><span class="line"></span><br><span class="line">//自动获取并变基</span><br><span class="line">$ git pull --rebase</span><br><span class="line"></span><br><span class="line">//手动获取并变基</span><br><span class="line">$ git fetch</span><br><span class="line">$ git rebase teamone/master</span><br></pre></td></tr></table></figure></p>
<p>要想上述方案有效，还需要对方在变基时确保 C4’ 和 C4 是几乎一样的。</p>
<h2 id="变基和合并到底哪种方式更好？"><a href="#变基和合并到底哪种方式更好？" class="headerlink" title="变基和合并到底哪种方式更好？"></a>变基和合并到底哪种方式更好？</h2><p>在回答这个问题之前，让我们先讨论一下提交历史到底意味着什么。</p>
<p>有一种观点认为，仓库的提交历史即是 <strong>记录实际发生过什么</strong>。<br>它是针对历史的文档，本身就有价值，不能乱改。<br>从这个角度看来，改变提交历史是一种亵渎，你使用<em>谎言</em>掩盖了实际发生过的事情。<br>如果由合并产生的提交历史是一团糟怎么办？ 既然事实就是如此，那么这些痕迹就应该被保留下来，让后人能够查阅。</p>
<p>另一种观点则正好相反，他们认为提交历史是 <strong>项目过程中发生的事</strong>。 没人会出版一本书的第一版草稿，软件维护手册也是需要反复修订才能方便使用。<br>持这一观点的人会使用 rebase 及 filter-branch 等工具来编写故事，怎么方便后来的读者就怎么写。</p>
<p>现在，让我们回到之前的问题上来，到底合并还是变基好？</p>
<p>希望你能明白，这并没有一个简单的答案。</p>
<p>Git 是一个非常强大的工具，它允许你对提交历史做许多事情，但每个团队、每个项目对此的需求并不相同。</p>
<p>既然你已经分别学习了两者的用法，相信你能够根据实际情况作出明智的选择。</p>
<p><strong>总的原则是，只对尚未推送或分享给别人的本地修改执行变基操作清理历史，从不对已推送至别处的提交执行变基操作，这样，你才能享受到两种方式带来的便利。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 3.3 - 远程分支/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 3.3 - 远程分支/" itemprop="url">chapter 3.3 - Git 远程分支</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="远程库"><a href="#远程库" class="headerlink" title="远程库"></a>远程库</h2><p>远程仓库是指托管在因特网或其他网络中的你的项目的版本库。</p>
<p>你可以有好几个远程仓库，通常有些仓库对你只读，有些则可以读写。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/19/Git - ProGit Chapter 3.3 - 远程分支/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 3.2 - 分支合并/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 3.2 - 分支合并/" itemprop="url">chapter 3.2 - Git 分支合并</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><h4 id="快进合并"><a href="#快进合并" class="headerlink" title="快进合并"></a>快进合并</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge hotfix</span><br></pre></td></tr></table></figure>
<p><img src="https://git-scm.com/book/en/v2/images/basic-branching-4.png" alt=""></p>
<ul>
<li>当试图合并两个分支时，如果顺着一个分支走下去能够到达另一个分支，那么 Git 在合并两者的时候，只会简单的将指针向前推进（指针右移），因为这种情况下的合并操作没有需要解决的分歧——这就叫做 “快进（fast-forward）”。</li>
</ul>
<p><img src="https://git-scm.com/book/en/v2/images/basic-branching-5.png" alt=""></p>
<h4 id="三方合并"><a href="#三方合并" class="headerlink" title="三方合并"></a>三方合并</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge iss53</span><br></pre></td></tr></table></figure>
<p><img src="https://git-scm.com/book/en/v2/images/basic-merging-1.png" alt=""></p>
<ul>
<li>不能执行快进合并的时候，Git 会使用两个分支的末端所指的快照（C4 和 C5）以及这两个分支的工作祖先（C2），做一个简单的三方合并。</li>
</ul>
<p><img src="https://git-scm.com/book/en/v2/images/basic-merging-2.png" alt=""></p>
<ul>
<li>Git 将此次三方合并的结果做了一个新的快照并且自动创建一个新的提交指向它。 这个被称作一次合并提交，它的特别之处在于他有不止一个父提交。</li>
<li>Git 会自行决定选取哪一个提交作为最优的共同祖先，并以此作为合并的基础。</li>
</ul>
<h4 id="合并冲突"><a href="#合并冲突" class="headerlink" title="合并冲突"></a>合并冲突</h4><p>合并冲突时，git 会暂停合并，不会创建提交对象，但没有冲突的文件已合并，有冲突的文件则会在冲突文件中加入标准的冲突解决标记：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">github pages test from you</span><br><span class="line">=======</span><br><span class="line">github pages test from me</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; hotfix</span><br></pre></td></tr></table></figure></p>
<p>表示 HEAD 指向的当前分支和 hotfix 分支有冲突，<br>=== 上面的是当前分支的内容，下面的是 hotfix 的内容，需要手动解决，即删除&lt;&lt;&lt; === &gt;&gt;&gt; 标记的行，然后冲突代码留下一个你想保留的版本。</p>
<h4 id="合并工具"><a href="#合并工具" class="headerlink" title="合并工具"></a>合并工具</h4><p>git 中默认的合并工具可能随系统不同而不同，合并工具是用来解决冲突的</p>
<p>显示可用的合并工具<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git mergetool --tool-help</span><br></pre></td></tr></table></figure></p>
<p>设置合并工具<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config merge.tool winmerge</span><br></pre></td></tr></table></figure></p>
<p>使用合并工具解决冲突<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//使用系统设置的合并工具 </span><br><span class="line">$ git mergetool</span><br><span class="line"></span><br><span class="line">//使用指定的合并工具</span><br><span class="line">$ git mergetool --tool=vimdiff</span><br></pre></td></tr></table></figure></p>
<p>退出合并工具后，git 会询问刚才的合并是否成功，回答是则暂存文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git mergetool</span><br><span class="line">Merging:</span><br><span class="line">index.html</span><br><span class="line"></span><br><span class="line">Normal merge conflict for &apos;index.html&apos;:</span><br><span class="line">  &#123;local&#125;: modified file</span><br><span class="line">  &#123;remote&#125;: modified file</span><br><span class="line">index.html seems unchanged.</span><br><span class="line">Was the merge successful [y/n]? n</span><br><span class="line">merge of index.html failed</span><br><span class="line">Continue merging other unresolved paths [y/n]? n</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.shenlin.ltd/2017/11/19/Git - ProGit Chapter 3.1 - 分支基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenlin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shenlin's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/19/Git - ProGit Chapter 3.1 - 分支基础/" itemprop="url">chapter 3.1 - Git 分支基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-19T15:25:35+08:00">
                2017-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/Book-ProGit/" itemprop="url" rel="index">
                    <span itemprop="name">Book-ProGit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="分支简介"><a href="#分支简介" class="headerlink" title="分支简介"></a>分支简介</h2><p>git 的分支，其实本质上仅仅是指向提交对象的可变指针，每次提交后，分支都会向前移动指向最后的提交对象。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/19/Git - ProGit Chapter 3.1 - 分支基础/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">shenlin</p>
              <p class="site-description motion-element" itemprop="description">A Programmer's Blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">140</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">60</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shenlin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
